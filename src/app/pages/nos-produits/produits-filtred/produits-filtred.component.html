<!-- 

<section class="py-5">
    <div class="px-4 px-lg-5">
        <pagination-controls class="pagination" style="margin:auto;" (pageChange)="p =$event"></pagination-controls>
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            <div class="col mb-2" *ngFor="let produit of produits|filter:term ">

                


                <div class="card h-100" 
                style="
                /* border-radius: 15px; */
                 /* border: none; */
                 " >
                    
                    <img class="card-img-top" style="border-radius: 15px;"
                     src="{{'http://localhost:8081/api/imgp/'+produit.idProduit}}" alt="..." />
                    
                    <div class="card-body p-4">
                        <div class="text-center">
                            
                            <h5 class="fw-bolder">{{  produit.nomProduit }}</h5>
                            
                            <span class="badge badge-pill badge-light">
                                  {{produit.prixProduit}} TND
                                </span>
                                <br>

                                <span class="badge badge-pill badge-light">
                                    <i class="fa fa-list-alt" aria-hidden="true"></i>  {{produit.categorie.nomCategorie}}  
                                </span>
                        </div>
                        
                     
                        <span class="badge badge-pill badge-light mt-2 text-center" style = "margin: auto;"*ngFor="let m of produit.modeles">
                            <img href="#"><img class="card-img-top img-responsive"
                               src = "{{'http://localhost:8081/api/ImgMarque/'+m.marque.id}}" 
                               style = "height :40px;width:60px;"
                              alt=""> {{m.libelleModele}} 
                         </span>  
                    </div>
                    <a class="badge badge-primary ml-5" [routerLink]="['/profile',produit.user.user_id]" style="width:30%;">{{produit.user.prenom}} {{produit.user.nom}} </a>
                    <span class="badge badge-pill badge-light">
                    <i class="fa fa-phone"> {{produit.user.telephone}}</i>
                    </span>

 
                    <span class="badge badge-pill badge-light">
                        <i class="fa fa-clock-o" aria-hidden="true"></i>
                        {{produit.dateCreation | date:'HH:mm'}} à {{produit.dateCreation | date:'dd-MM-yyyy'}}        
                    </span>
                    

                        <span class="badge badge-pill badge-light">
                            <i class="fa fa-map-marker" aria-hidden="true"></i> 
                                        {{produit.delegation.gouvernorat.libelle}}, {{produit.delegation.libelle}}
                          </span>
                    
                    <a *ngIf="authService.loggedUser == produit.user.username" class="btn btn-outline-danger" (click)="supprimerProduit(produit)" style="border: none;width:40%;margin:auto;">
                        <i class="fa fa-trash"></i></a>
                    <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                        <div class="text-center"><a class="btn btn-outline-primary mt-auto" style="border:none;border-radius: 25px;" [routerLink]="['/produit',produit.idProduit]">Plus de détail</a></div>
                    </div>
                </div>









            </div>
            
      
   
        
    
          
        </div>

        <div>

        </div>
        
            </div> 
</section> -->

<div  class="container-fluid d-flex justify-content-center">
    <div class="row mb-5">
      <div *ngFor="let produit of produits|filter:term " class="col-sm-3">
        <div class="card mt-3">


          


      <img src="{{'http://localhost:8081/api/imgp/'+produit.idProduit}}" class="card-img-top" width="100%" style="height:170px ;">
      <div class="card-body pt-0 px-0">
        <div class="dropdown" style="position:absolute ;left: 83%; top: 1%;">
          <button class="btn btn-light dropdown-toggle" *ngIf="authService.loggedUser == produit.user.username" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            
          </button>
          <div class="dropdown-menu" style="border-radius:10px;background-color:#e9ebeddf" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" (click)="supprimerProduit(produit)">Supprimer</a>
            <a class="dropdown-item" href="#">Modifier</a>
            <a class="dropdown-item" href="#">Désactiver</a>
          </div>
        </div>
        <div class="d-flex flex-row justify-content-between mb-0 px-3">
          <h6 class="text-muted mt-1">{{  produit.nomProduit }}</h6>
          <h6>{{produit.prixProduit}} TND</h6>
        </div>
        <hr class="mt-2 mx-3">
        <div class="d-flex flex-row justify-content-between px-3 pb-4">
          <div class="d-flex flex-column"><span class="text-muted">{{produit.categorie.famille.libelle}}</span></div>
          <div class="d-flex flex-column"><h5 class="mb-0">{{produit.categorie.nomCategorie}}</h5></div>
        </div>
        <div class="d-flex flex-row justify-content-between px-3 pb-4">
            <div class="d-flex flex-column"><span class="text-muted"><i class="fa fa-map-marker" aria-hidden="true"></i> {{produit.delegation.libelle}}</span><small class="text-muted">{{produit.delegation.gouvernorat.libelle}}</small></div>
            <div class="d-flex flex-column"><span class="text-muted"> <i class="fa fa-clock-o" aria-hidden="true"></i>
                {{produit.dateCreation | date:'HH:mm'}}  </span><small class="text-muted text-right">{{produit.dateCreation | date:'dd-MM-yyyy'}}</small></div>
          </div>
        <div class="d-flex flex-row justify-content-between p-3 mid" style="display:flex ;" >
          <div class="d-flex flex-column" *ngFor="let m of produit.modeles">
            <small class="text-muted mb-1">Marque</small>
            <div class="d-flex flex-row">
            <img src="{{'http://localhost:8081/api/ImgMarque/'+m.marque.id}}" width="35px" height="25px">
            <div class="d-flex flex-column ml-1">
                <small class="ghj">{{m.libelleModele}} </small></div></div></div>
        </div>
    
        <div class="mx-3 mt-3 mb-2"><button type="button" class="btn btn-danger btn-block" [routerLink]="['/produit',produit.idProduit]"><small>découvrir</small></button></div>
       
      </div>
    </div>
      </div>
      

    
    </div>
  </div>

            